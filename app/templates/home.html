{%extends "index.html" %} {%block css%}
<link rel="stylesheet" href="{{url_for('static', path='/css/home.css')}}" />
{%endblock%} {%block content%}
<div class="home">
  <form class="top-buttons">
    <button
      formmethod="get"
      formaction="{{url_for('config_get')}}"
      class="btn-term"
      id="config-btn"
    >
      Config
    </button>
    <button
      formmethod="post"
      formaction="{{url_for('clear_chat')}}"
      class="btn-term logout"
    >
      Clear Chat
    </button>
    <button
      formmethod="post"
      formaction="{{url_for('logout')}}"
      class="btn-term logout"
      id="logout-btn"
    >
      Logout
    </button>
  </form>
  <div class="chat-screen">
    <div class="message" id="messages">
      {% for message in history %}
      <div
        class="message-box {%if message.role=='user'%}message-right{%endif%}"
      >
        <p class="role">
          {% if message.role=='user'%} {{user_name}} {%else%} {{agent_name}}
          ({{message.role}}) {%endif%}
        </p>
        <p class="content">{{message.content | safe}}</p>
      </div>
      {%endfor%}
    </div>
    <form
      id="chat-form"
      class="message-input"
      method="post"
      action="{{url_for('chat_post')}}"
    >
      <div class="input-field">
        <label>>>></label>
        <input
          type="text"
          class="t-input t-input--grow"
          id="message-input"
          name="message"
          autofocus
        />
      </div>
      <button class="send-btn" id="send-btn">
        <span id="send-text">Send!</span>
        <span id="message-loader" class="message-loader hidden">
          <div class="message-dot"></div>
          <div class="message-dot"></div>
          <div class="message-dot"></div>
        </span>
      </button>
    </form>
  </div>
</div>

{%endblock%} {%block js%}
<script src="{{url_for('static', path='/js/home.js')}}" type="module"></script>
{%endblock%}
